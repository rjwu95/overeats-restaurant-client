(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t){},105:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),i=a.n(o),l=a(115),s=a(112),c=a(114),u=a(53),p=a(31),m=a(17),d=a(11),g=a.n(d),h=a(32),f=a(18),b=a(19),v=a(22),E=a(20),y=a(23),w=a(10),S=a.n(w),x=a(52),j=a.n(x)()("http://54.180.102.251:8080"),N=(a(105),function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",isLogin:JSON.parse(localStorage.getItem("isLogin")),restaurantKey:localStorage.getItem("restaurant_id"),orderData:[]},a.baseUrl="http://54.180.102.251:8080",a.logout=function(){localStorage.setItem("isLogin",!1),j.disconnect("disconnect",function(){return console.log("\ub04a\uae40..")}),a.setState({isLogin:!1})},a.signin=Object(h.a)(g.a.mark(function e(){var t,n,r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.email,r=t.password,""!==n&&""!==r){e.next=3;break}return e.abrupt("return",alert("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \uc801\uc5b4\uc8fc\uc138\uc694!"));case 3:return o=a.baseUrl,e.next=6,S.a.post(o+"/users/signin",{email:n,password:r},{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(e),a.setState({restaurantKey:e.data.restaurantKey}),localStorage.setItem("restaurant_id",e.data.restaurantKey),localStorage.setItem("restaurantName",e.data.restaurantName),localStorage.setItem("isLogin",!0),a.setState({isLogin:!0}),window.location.href="/"}).catch(function(e){return alert("\uc544\uc774\ub514\ub098 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694")});case 6:case"end":return e.stop()}},e,this)})),a._totalPrice=function(e){return e.orderList.reduce(function(e,t){return e+Number(t.price.slice(0,t.price.length-1).split("").filter(function(e){return","!==e}).join(""))*t.number},0)},a.targetValue=function(e,t){a.setState(Object(m.a)({},t,e.target.value))},a.order=function(){var e=Object(h.a)(g.a.mark(function e(t){var n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.parentNode.childNodes[0].textContent.slice(6),e.next=3,localStorage.getItem("restaurant_id");case 3:r=e.sent,S.a.get(a.baseUrl+"/restaurants/delivery/".concat(r,"/").concat(n)),a.setState(Object(p.a)({},a.state,{orderData:a.state.orderData.filter(function(e){return e.order_id!==n})}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("didmount"),j.on(localStorage.getItem("restaurant_id"),function(t){alert("\uc0c8 \uc8fc\ubb38\uc774 \uc654\uc5b4\uc694!"),e.setState(Object(p.a)({},e.state,{orderData:[t].concat(Object(u.a)(e.state.orderData))}))})}},{key:"render",value:function(){var e=this;return this.state.isLogin?r.a.createElement("div",{className:"login"},r.a.createElement("span",null,localStorage.getItem("restaurantName")),"\uc758 \uc2f8\uc7a5\ub2d8 \ud398\uc774\uc9c0",r.a.createElement("button",{onClick:this.logout},"\ub85c\uadf8\uc544\uc6c3"),r.a.createElement("div",{style:{fontSize:"1em",padding:"30px"},className:"orderlist"},r.a.createElement("hr",null),r.a.createElement("h4",null,"\uc8fc\ubb38\ub9ac\uc2a4\ud2b8"),this.state.orderData.map(function(t,a){return r.a.createElement("div",{key:a,className:"orderList"},r.a.createElement("h4",null,"\uc8fc\ubb38\ubc88\ud638: ",t.order_id),r.a.createElement("h4",null,"\uc8fc\uc18c: ",t.address),r.a.createElement("h4",null,"\uc8fc\ubb38\uc2dc\uac04: ",t.date),r.a.createElement("div",null,"\uc8fc\ubb38\ub0b4\uc5ed:"," ",t.orderList.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("span",null,e.menu),r.a.createElement("span",{style:{marginLeft:15}}," ",e.number,"\uac1c"),r.a.createElement("span",{style:{marginLeft:15}}," ",e.price))})),r.a.createElement("p",null,"\ucd1d \uae08\uc561:",e._totalPrice(t),"\uc6d0"),r.a.createElement("div",null,"\uc8fc\ubb38\uc790\uc804\ud654\ubc88\ud638: ",t.phoneNumber),r.a.createElement("button",{onClick:e.order},"\ubc30\ub2ec\uc644\ub8cc"))}))):r.a.createElement("div",{className:"logout"},r.a.createElement("h2",{style:{color:"#ddd"}},"\uc2dd\ub2f9\uc544\uc774\ub514\ub85c \ub85c\uadf8\uc778 \ud574\uc8fc\uc138\uc694"),["email","password"].map(function(t){return r.a.createElement("input",{type:"password"===t?t:"text",onChange:function(a){return e.targetValue(a,t)},placeholder:t,key:t})}),r.a.createElement("button",{onClick:this.signin},"\ub85c\uadf8\uc778"))}}]),t}(n.Component)),O=a(113),k=function(e){var t=e.replace(/ /gi,"").replace(/-/gi,"").split("");return"0"!==t[2]?(t.splice(3,0,"-"),t.splice(7,0,"-"),t=t.join("")):(t.splice(3,0,"-"),t.splice(8,0,"-"),t=t.join("")),t},C=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",name:"",phoneNumber:"",confirmPassword:!1,visible:!1,register:!1},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this;return this.state.register?r.a.createElement(O.a,{to:"/"}):r.a.createElement("div",{style:{width:"50%",marginLeft:"25%"}},r.a.createElement("input",{onChange:function(t){return e.setState({email:t.target.value})},style:{height:15},placeholder:"email"}),r.a.createElement("input",{onChange:function(t){return e.setState({password:t.target.value})},style:{height:15},placeholder:"password",type:"password"}),r.a.createElement("div",null,r.a.createElement("input",{onChange:function(t){e.setState({confirmPassword:t.target.value===e.state.password})},style:{height:15},onBlur:function(){e.setState({visible:!0})},placeholder:"confirm password",type:"password"}),this.state.visible?this.state.confirmPassword?r.a.createElement("div",{style:{color:"green",fontSize:"0.8em",textAlign:"center"}},"\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud569\ub2c8\ub2e4"):r.a.createElement("div",{style:{color:"red",fontSize:"0.8em",textAlign:"center"}},"\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"):r.a.createElement("div",null)),r.a.createElement("input",{onChange:function(t){return e.setState({name:t.target.value})},style:{height:15},placeholder:"name"}),r.a.createElement("input",{onBlur:function(t){return e.setState({phoneNumber:k(t.target.value.split("").filter(function(e){return!isNaN(Number(e))}).join(""))})},style:{height:15},placeholder:"phoneNumber"}),r.a.createElement("button",{onClick:function(){var t=e.state;t.email,t.password,t.confirmPassword,t.name;if(""===t.phoneNumber)return alert("\uc591\uc2dd\uc5d0 \ub9de\uac8c \uc791\uc131\ud574\uc8fc\uc138\uc694!");S.a.post("http://54.180.102.251:8080/users/signup",e.state,{headers:{"Content-Type":"application/json"}}).then(function(t){alert("\uc548\ub155\ud558\uc138\uc694!"),e.setState({register:!0})}).catch(function(e){console.log(e.message),401===e.response.status?alert("\uc774\ubbf8 \uac00\uc785\ub41c \uc804\ud654\ubc88\ud638\uc785\ub2c8\ub2e4"):402===e.response.status&&alert("\uc774\ubbf8 \uac00\uc785\ub41c \uc774\uba54\uc77c\uc785\ub2c8\ub2e4")})},style:{width:"50%",height:40,marginTop:30,marginLeft:"25%"}},"\ub4f1\ub85d"))}}]),t}(n.Component),L=r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",padding:"5px",boxShadow:"0px 2px 5px #111"}},r.a.createElement(s.a,{to:"/",style:{padding:"10px",color:"#51cdca",textDecoration:"none"}},"Home"),r.a.createElement(s.a,{to:"/signup",style:{marginLeft:20,borderColor:"black",borderWidth:.5,padding:"10px",color:"#51cdca",textDecoration:"none"}},"signup")),r.a.createElement(c.a,{exact:!0,path:"/",component:N}),r.a.createElement(c.a,{exact:!0,path:"/signup",component:C})));i.a.render(L,document.getElementById("root"))},55:function(e,t,a){e.exports=a(111)}},[[55,1,2]]]);
//# sourceMappingURL=main.44407d23.chunk.js.map